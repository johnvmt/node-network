(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.nodenetwork = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function AgnosticRpc(){this._requests={}}var Utils=require("./Utils");AgnosticRpc.prototype.request=function(){var e=Utils.parseArgs(arguments,[{name:"query",level:0,validate:function(e,t){return"undefined"!=typeof e}},{name:"options",level:1,validate:function(e,t){return"object"==typeof e},default:{}},{name:"callback",level:1,validate:function(e,t){return"function"==typeof e}}]),t={multipleResponses:!1},n=Utils.objectMerge(t,e.options);if("function"==typeof e.callback){var s=Utils.uniqueId();this._requests[s]={callback:e.callback,options:n}}var o={query:e.query};return"undefined"!=typeof s&&(o.id=s),o},AgnosticRpc.prototype.handleResponse=function(e){if("string"==typeof e.id&&"object"==typeof this._requests[e.id]){var t=this._requests[e.id];"function"==typeof t.callback&&t.callback(null,e.response),t.options.multipleResponses||delete this._requests[e.id]}},AgnosticRpc.prototype.handleRequest=function(e,t,n){var s=function(t){var s={response:t};"string"==typeof e.id&&(s.id=e.id),n(s)};t(e.query,s)},AgnosticRpc.prototype.messageIsResponse=function(e){return"undefined"!=typeof e.response},AgnosticRpc.prototype.messageIsRequest=function(e){return!this.messageIsResponse(e)},module.exports=function(){return new AgnosticRpc};
},{"./Utils":2}],2:[function(require,module,exports){
var Utils={};Utils.objectForEach=function(r,e){var t;for(t in r)r.hasOwnProperty(t)&&e(r[t],t,r)},Utils.objectMerge=function(){var r={};return this.objectForEach(arguments,function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}),r},Utils.uniqueId=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},Utils.parseArgs=function(r,e){function t(r,e){return"function"!=typeof r.validate||r.validate(e)}function n(r,e){for(var t=e;t<r.length;t++)if("undefined"==typeof r[t]||!r[t].required)return!0;return!1}var i={},a=0;return Array.isArray(r)||(r=Array.prototype.slice.call(r)),r.forEach(function(r,o){for(var f=a;f<e.length;f++){if(e[f].required){if(t(e[f],r)){e[f].matched=!0,i[e[f].name]=r,a++;break}throw"missing_required"}if(!e[f].required&&(n(e,f)||e[f].level>e[f-1].level&&e[f-1].matched)&&t(e[f],r)){e[f].matched=!0,i[e[f].name]=r,a++;break}e[f].matched=!1,a++}}),e.forEach(function(r){"undefined"==typeof i[r.name]&&"undefined"!=typeof r.default&&(i[r.name]=r.default)}),i},module.exports=Utils;
},{}],3:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],4:[function(require,module,exports){
!function(e){"use strict";function t(){}function n(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}function i(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&i(e.listener)}var s=t.prototype,o=e.EventEmitter;s.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},s.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},s.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},s.addListener=function(e,t){if(!i(t))throw new TypeError("listener must be a function");var r,s=this.getListenersAsObject(e),o="object"==typeof t;for(r in s)s.hasOwnProperty(r)&&n(s[r],t)===-1&&s[r].push(o?t:{listener:t,once:!1});return this},s.on=r("addListener"),s.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},s.once=r("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},s.removeListener=function(e,t){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=n(s[i],t),r!==-1&&s[i].splice(r,1));return this},s.off=r("removeListener"),s.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},s.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},s.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},s.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},s.removeAllListeners=r("removeEvent"),s.emitEvent=function(e,t){var n,r,i,s,o,u=this.getListenersAsObject(e);for(s in u)if(u.hasOwnProperty(s))for(n=u[s].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},s.trigger=r("emitEvent"),s.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return e.EventEmitter=o,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.EventEmitter=t}(this||{});
},{}],5:[function(require,module,exports){
function AddressManager(r){if(!Array.isArray(r))throw new Error("base_address_not_set");this._baseAddress=r,this._max="0",this._stringBase=36}AddressManager.prototype.allocate=function(){return this._max=this._incrementString(this._max,this._stringBase,1),this._baseAddress.concat(this._max)},AddressManager.prototype.addressIsEqual=function(r,s){if(Array.isArray(s)||(s=this._baseAddress),r.length==s.length){var e;for(e=0;e<s.length;e++)if(r[e]!=s[e])return!1;return!0}return!1},AddressManager.prototype.addressIsChild=function(r,s){if(Array.isArray(s)||(s=this._baseAddress),r.length>s.length){var e;for(e=0;e<s.length;e++)if(r[e]!=s[e])return!1;return!0}return!1},AddressManager.prototype.addressIsParent=function(r,s){return Array.isArray(s)||(s=this._baseAddress),this.addressIsChild(s,r)},AddressManager.prototype._incrementString=function(r,s,e){return(parseInt(r,s)+e).toString(s)},module.exports=function(r){return new AddressManager(r)};
},{}],6:[function(require,module,exports){
(function (process){
function NodeRouter(e){"object"!=typeof e&&(e={});var t=this;t.config=e,t._routeTable=RouteTable(),t._routeTable.on("insert",function(e){var r={address:e.address.join("-"),cost:e.cost};t.emit("insert",r)}),t._routeTable.on("remove",function(e){t.emit("remove",e.join("-"))}),t._connections={},t._connectionKeyMax=-1,t._rpc=Rpc(),process.nextTick(function(){t.setAddress(t.config.address)}),t._actions={ping:function(e,t,r){r(null,!0)},route:function(e,r,o){t._route(e,o)},addressrevoke:function(e,r,o){"undefined"!=typeof t._addressManager&&t._addressManager.addressIsEqual(e)&&t._setAddressParts()},addressrequest:function(e,r,o){if("object"==typeof t._addressManager){var n=t._addressManager.allocate();o(null,n)}else o("no_address",null)},routesupdate:function(e,r){if(t._routesApplyOperations(e,r),"undefined"==typeof t.address){var o=function(e){return 0==e.cost},n=t._routeOperationsFilter(e,{insert:o});Array.isArray(n.insert)&&n.insert.length>0&&t.rpcRequest(r,"addressrequest",function(e,o){e?console.error("ADDREQ-FAILED",e):t._setAddressParts(o,r)})}}}}var Rpc=require("agnostic-rpc"),EventEmitter=require("wolfy87-eventemitter"),RouteTable=require("./RouteTable"),AddressManager=require("./AddressManager"),Utils=require("./Utils");NodeRouter.prototype.__proto__=EventEmitter.prototype,NodeRouter.prototype.send=function(){var e=Utils.parseArgs(arguments,[{name:"destAddressesJoined",level:0,validate:function(e,t){return"string"==typeof e||Array.isArray(e)}},{name:"message",level:0},{name:"options",level:1,validate:function(e,t){return"object"==typeof e},default:{}},{name:"callback",level:1,validate:function(e,t){return"function"==typeof e}}]),t=Array.isArray(e.destAddressesJoined)?e.destAddressesJoined:[e.destAddressesJoined],r=[];t.forEach(function(e){r.push(e.split("-"))}),this._route({message:e.message,dest:r},e.callback)},NodeRouter.prototype.setAddress=function(e,t){if("string"==typeof e){var r=e.split("-");return this._setAddressParts(r,t)}return!1},NodeRouter.prototype._broadcastRouteOperations=function(e){var t=this;Utils.objectForEach(t._connections,function(r,o){t.rpcRequest(o,"routesupdate",e)})},NodeRouter.prototype._routesApplyOperations=function(e,t){var r=this,o=JSON.parse(JSON.stringify(e)),n=function(e){return"undefined"==typeof r._addressManager||!r._addressManager.addressIsEqual(e.address)},s=r._routeOperationsFilter(o,{insert:n});Array.isArray(s.insert)&&s.insert.forEach(function(e){e.cost=e.cost+1});var a=r._routeTable.modifyRoutes(s,t),n=function(e){return"undefined"!=typeof r._addressManager&&!r._addressManager.addressIsChild(e.address)};localOperationsBroadcast=r._routeOperationsFilter(a,{insert:n}),Object.keys(localOperationsBroadcast).length&&r._broadcastRouteOperations(localOperationsBroadcast)},NodeRouter.prototype._setAddressParts=function(e,t){var r=this,o={};if("undefined"!=typeof r.address){o.remove=[r.address];var n=r._routeTable.childRoutes(this.address);"object"==typeof n&&Utils.objectForEach(n,function(e,t){var o=r.address.concat(t);r._routeTable.removeRoute(o,e.connectionKey),r.rpcRequest(e.connectionKey,"addressrevoke",o)})}r.address=e,r.addressConnectionKey=t,r._addressManager=void 0,"undefined"!=typeof r.address&&(r._addressManager=AddressManager(r.address),o.insert=[{address:r.address,cost:0}]),Object.keys(o).length&&r._broadcastRouteOperations(o),r.emit("addressParts",r.address);var s=Array.isArray(this.address)?r.address.join("-"):void 0;r.emit("address",s)},NodeRouter.prototype.connectionRouteTableOperations=function(e){var t=this,r=function(r,o){return r.connection!=e&&("object"!=typeof t._addressManager||!t._addressManager.addressIsChild(o))},o=t._routeTable.toRouteOperations(r);return"undefined"!=typeof t.address&&(Array.isArray(o.insert)||(o.insert=[]),o.insert.push({address:t.address,cost:0})),o},NodeRouter.prototype.addConnection=function(e,t){function r(){var t=o.connectionRouteTableOperations(e);o.rpcRequest(n,"routesupdate",t)}var o=this;o._connectionKeyMax++;var n=o._connectionKeyMax;"object"==typeof t&&null!=t||(t={}),o._connections[n]={connection:e,options:t},e.on("data",function(e){try{o._rpcMessage(n,e)}catch(e){console.error(e)}}),e.on("disconnect",function(){o.addressConnectionKey==n&&o._setAddressParts();var e=o._routeTable.removeConnectionRoutes(n);o._broadcastRouteOperations(e),delete o._connections[n]}),e.on("connect",function(){o._connections[n]={connection:e,options:t},r()}),r()},NodeRouter.prototype._routeOperationsFilter=function(e,t){var r={};return Utils.objectForEach(e,function(e,o){if(Array.isArray(e))if("function"==typeof t[o]){var n=e.filter(t[o]);Array.isArray(n)&&n.length>0&&(r[o]=n)}else r[o]=e}),r},NodeRouter.prototype.rpcBroadcast=function(){var e=this,t=Array.prototype.slice.call(arguments);Utils.objectForEach(e._connections,function(r,o){e.rpcRequest.apply(e,[o].concat(t))})},NodeRouter.prototype.rpcRequest=function(){var e=Utils.parseArgs(arguments,[{name:"connectionKey",level:0},{name:"action",level:0,validate:function(e,t){return"string"==typeof e}},{name:"query",level:1,validate:function(e,t){return"object"==typeof e},default:{}},{name:"callback",level:1,validate:function(e,t){return"function"==typeof e}}]),t=this._rpc.request({action:e.action,query:e.query},function(t,r){"function"==typeof e.callback&&(t?e.callback(t,null):"string"==typeof r.status&&"ok"==r.status?e.callback(null,r.response):"string"==typeof r.status&&e.callback(r.error,r.response))}),r=this._connections[e.connectionKey].connection;r.emit("data",t)},NodeRouter.prototype._route=function(e,t){function r(){"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments))}var o=this,n={};Array.isArray(e.dest)?(e.dest.forEach(function(t){if("object"==typeof o._addressManager&&o._addressManager.addressIsEqual(t))o.emit("data",e),o.emit("message",e.message),r(null,o.address);else{var s=o._routeTable.nextConnection(t);"undefined"!=typeof s?(Array.isArray(n[s])||(n[s]=[]),n[s].push(t)):r("no_route",null)}}),Utils.objectForEach(n,function(r,n){e.dest=r,o.rpcRequest(n,"route",e,t)})):r("improper_route_format",null)},NodeRouter.prototype._rpcMessage=function(e,t){var r=this;if(r._rpc.messageIsResponse(t))r._rpc.handleResponse(t);else{var o=r._actions;r._rpc.handleRequest(t,function(t,r){var n=function(e,t){r(e?{status:"error",error:e,response:t}:{status:"ok",response:t})};"string"==typeof t.action&&"function"==typeof o[t.action]?o[t.action](t.query,e,n):n("action_not_found",null)},function(t){if(r._connections[e]){var o=r._connections[e].connection;o.emit("data",t)}})}},module.exports=function(e){return new NodeRouter(e)};
}).call(this,require('_process'))

},{"./AddressManager":5,"./RouteTable":7,"./Utils":9,"_process":3,"agnostic-rpc":1,"wolfy87-eventemitter":4}],7:[function(require,module,exports){
function RouteTable(){this.table=Tree()}var Utils=require("./Utils"),Tree=require("./Trie"),EventEmitter=require("wolfy87-eventemitter");RouteTable.prototype.toRouteOperations=function(e){var t=[];return this.table.traverse(function(r,o){("function"!=typeof e||e(r,o))&&t.push({address:o,cost:r.cost})}),0==t.length?{}:{insert:t}},RouteTable.prototype.__proto__=EventEmitter.prototype,RouteTable.prototype.childRoutes=function(e){return this.table.children(e)},RouteTable.prototype.nextConnection=function(e){var t=this.table.deepest(e);return"object"==typeof t?t.data.connectionKey:void 0},RouteTable.prototype.removeConnectionRoutes=function(e){var t=[];return this.table.traverse(function(r,o){r.connectionKey==e&&t.push(o)}),this.modifyRoutes({remove:t},e)},RouteTable.prototype.modifyRoutes=function(e,t){var r=this,o={};return Array.isArray(e.remove)&&e.remove.forEach(function(e){Array.isArray(e)&&r.removeRoute(e,t)&&(Array.isArray(o.remove)||(o.remove=[]),o.remove.indexOf(e)<0&&o.remove.push(e),r.emit("remove",e))}),Array.isArray(e.insert)&&e.insert.forEach(function(e){Array.isArray(e.address)&&"number"==typeof e.cost&&r.insertRoute(e.address,t,e.cost)&&(Array.isArray(o.insert)||(o.insert=[]),o.insert.indexOf(e)<0&&o.insert.push(e),r.emit("insert",e))}),o},RouteTable.prototype.insertRoute=function(e,t,r){var o=this.table.get(e);return("undefined"==typeof o||o.cost>r||o.connectionKey==t)&&(this.table.set(e,{cost:r,connectionKey:t}),!0)},RouteTable.prototype.removeRoute=function(e,t){var r=this.table.get(e);return"object"==typeof r&&r.connectionKey==t&&this.table.remove(e)},module.exports=function(){return new RouteTable};
},{"./Trie":8,"./Utils":9,"wolfy87-eventemitter":4}],8:[function(require,module,exports){
function Trie(){this.trie={}}var Utils=require("./Utils");Trie.prototype.get=function(e){var t=this.getNode(e);return"object"==typeof t&&"undefined"!=typeof t.data?t.data:void 0},Trie.prototype.getNode=function(e){var t=this.trie;for(var n in e){if("object"!=typeof t.children||"object"!=typeof t.children[e[n]])return;t=t.children[e[n]]}return t},Trie.prototype.set=function(e,t){var n=this.trie;for(var r in e)"object"!=typeof n.children&&(n.children={}),"object"!=typeof n.children[e[r]]&&(n.children[e[r]]={}),n=n.children[e[r]];n.data=t},Trie.prototype.remove=function(e){var t=this.inPathNodes(e);if(t.length!=e.length+1)return!1;var n=t.pop();if(delete n.node.data,"object"==typeof n.node.children&&Object.keys(n.node.children).length>0)return!0;n.path.length>0&&delete t[t.length-1].node.children[n.path.pop()];for(var r=t.length-1;r>=0;r--){if("object"==typeof t[r].node.children&&0==Object.keys(t[r].node.children).length&&delete t[r].node.children,"undefined"!=typeof t[r].node.data||"object"==typeof t[r].node.children&&Object.keys(t[r].node.children).length>0)return!0;r>0&&delete t[r-1].node.children[t[r].path.pop()]}return!0},Trie.prototype.removeNode=function(e){var t=this.inPathNodes(e);if(t.length!=e.length+1)return!1;var n=t.pop();delete n.node.data,n.path.length>0&&delete t[t.length-1].node.children[n.path.pop()];for(var r=t.length-1;r>=0;r--){if("object"==typeof t[r].node.children&&0==Object.keys(t[r].node.children).length&&delete t[r].node.children,"undefined"!=typeof t[r].node.data||"object"==typeof t[r].node.children&&Object.keys(t[r].node.children).length>0)return!0;"undefined"!=typeof t[r-1]&&delete t[r-1].node.children[t[r].path.pop()]}return!0},Trie.prototype.children=function(e){var t=this.childrenNodes(e);if("undefined"!=typeof t){var n={};return Utils.objectForEach(t,function(e,t){"undefined"!=typeof e.data&&(n[t]=e.data)}),n}},Trie.prototype.childrenNodes=function(e){var t=this.getNode(e);return"object"!=typeof t?void 0:"object"!=typeof t.children?{}:t.children},Trie.prototype.traverse=function(e,t,n){this.traverseNodes(function(t,n){"undefined"!=typeof t.data&&e(t.data,n)},t,n)},Trie.prototype.traverseNodes=function(e,t,n){if(!Array.isArray(n))var n=[];if("object"!=typeof t)var t=this.trie;if(e(t,n),t.children,!0){var r;for(r in t.children)t.children.hasOwnProperty(r)&&this.traverseNodes(e,t.children[r],n.concat(r))}},Trie.prototype.deepest=function(e){var t=void 0,n=void 0;return this.descend(e,function(e,r){t=e,n=r}),"undefined"==typeof n?void 0:{pathKeys:n,data:t}},Trie.prototype.descend=function(e,t){this.descendNodes(e,function(e,n){"undefined"!=typeof e.data&&t(e.data,n)})},Trie.prototype.descendNodes=function(e,t){var n=this.trie;t(n,[]);for(var r=0;r<e.length;r++){if("object"!=typeof n.children||"object"!=typeof n.children[e[r]])return;n=n.children[e[r]],t(n,e.slice(0,r+1))}},Trie.prototype.inPathNodes=function(e){var t=[];return this.descend(e,function(e,n){t.push({path:n,data:e})}),t},Trie.prototype.inPathNodes=function(e){var t=[];return this.descendNodes(e,function(e,n){t.push({path:n,node:e})}),t},module.exports=function(){return new Trie};
},{"./Utils":9}],9:[function(require,module,exports){
var Utils={};Utils.objectFilterProperties=function(e,t){var n={};return t.forEach(function(t){n[t]=e[t]}),n},Utils.objectContainsObject=function(e,t){for(var n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||e[n]!=t[n]))return!1;return!0},Utils.objectFilter=function(e,t){var n={};return this.objectForEach(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n},Utils.objectForEach=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&t(e[n],n,e)},Utils.objectGet=function(e,t){var n=this;if(0==t.length)return e;if("object"==typeof e){if(("string"==typeof t[0]||"number"==typeof t[0])&&null!==e&&e.hasOwnProperty(t[0]))return this.objectGet(e[t[0]],t.slice(1));if(null===t[0]){if(Array.isArray(e)){var r=[];e.forEach(function(e,i){r[i]=n.objectGet(e,t.slice(1))})}else{var r={};this.objectForEach(e,function(e,i){r[i]=n.objectGet(e,t.slice(1))})}return r}if(t[0]instanceof RegExp){var r={};return this.objectForEach(e,function(e,i){i.match(t[0])&&(r[i]=n.objectGet(e,t.slice(1)))}),r}if("function"==typeof t[0]){if(e instanceof Array){var r=[];e.forEach(function(e,i,o){t[0](e,i,o)&&(r[i]=n.objectGet(e,t.slice(1)))})}else{var r={};this.objectForEach(n.objectFilter(e,t[0]),function(e,i){r[i]=n.objectGet(e,t.slice(1))})}return r}if(t[0]instanceof Array){if(e instanceof Array){var r=[];t[0].forEach(function(t,n){r[n]=e[n]})}else{var r={};this.objectForEach(n.objectFilterProperties(e,t[0]),function(e,i){r[i]=n.objectGet(e,t.slice(1))})}return r}}},Utils.objectSet=function(e,t,n){return 1==t.length?(e[t[0]]=n,!0):("undefined"==typeof e[t[0]]&&(e[t[0]]={}),this._objectSet(e[t[0]],t.slice(1),n))},Utils.objectIsset=function(e,t){return 1==t.length?"undefined"!=typeof e[t[0]]:"undefined"!=typeof e[t[0]]&&this.objectIsset(e[t[0]],t.slice(1))},Utils.objectMerge=function(){var e={};return this.objectForEach(arguments,function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},Utils.uniqueId=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Utils.parseArgs=function(e,t){function n(e,t){return"function"!=typeof e.validate||e.validate(t)}function r(e,t){for(var n=t;n<e.length;n++)if("undefined"==typeof e[n]||!e[n].required)return!0;return!1}var i={},o=0;return Array.isArray(e)||(e=Array.prototype.slice.call(e)),e.forEach(function(e,c){for(var u=o;u<t.length;u++){if(t[u].required){if(n(t[u],e)){t[u].matched=!0,i[t[u].name]=e,o++;break}throw"missing_required"}if(!t[u].required&&(r(t,u)||t[u].level>t[u-1].level&&t[u-1].matched)&&n(t[u],e)){t[u].matched=!0,i[t[u].name]=e,o++;break}t[u].matched=!1,o++}}),t.forEach(function(e){"undefined"==typeof i[e.name]&&"undefined"!=typeof e.default&&(i[e.name]=e.default)}),i},Utils.callbackQueue=function(){function e(){r||(r=!0,n.queueCompleteCallback.apply(this,Array.prototype.slice.call(arguments)))}function t(){i++,"function"==typeof n.queueFunctions[i]?Array.isArray(n.queueFunctionArgs)&&!n.options.expand?n.queueFunctions[i](n.queueFunctionArgs,t,e):Array.isArray(n.queueFunctionArgs)&&n.options.expand?n.queueFunctions[i].apply(this,n.queueFunctionArgs.concat([t,e])):n.queueFunctions[i](t,e):"function"!=typeof n.queueNoMatchCallback||r||n.queueNoMatchCallback()}var n=Utils.parseArgs(arguments,[{name:"queueFunctions",level:0,validate:function(e,t){return Array.isArray(e)}},{name:"queueFunctionArgs",level:1,validate:function(e,t){return Array.isArray(e)}},{name:"queueCompleteCallback",level:0,validate:function(e,t){return"function"==typeof e}},{name:"queueNoMatchCallback",level:1,validate:function(e,t){return"function"==typeof e}},{name:"options",level:1,validate:function(e,t){return"object"==typeof e},default:{}}]);n.options=Utils.objectMerge({expand:!1},n.options);var r=!1,i=-1;t()},module.exports=Utils;
},{}]},{},[6])(6)
});


//# sourceMappingURL=nodenetwork.js.map